{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PC\\\\Desktop\\\\Momentum stra-health project\\\\src\\\\components\\\\InventoryManagement.js\",\n  _s = $RefreshSig$();\n// InventoryManagement.js (Updated)\nimport React, { useState, useEffect, useMemo } from 'react';\nimport NotificationButton from './common/NotificationButton';\nimport { User, ChevronDown, LogOut, Home, BarChart3, Package, Plus, AlertTriangle, CheckCircle, Clock, TrendingUp, Search, Filter, Download, Pill, MoreVertical, AlertCircle, ShoppingCart, Menu, X, Calendar, DollarSign, Box, Thermometer, FileText } from 'lucide-react';\nimport LoadingSpinner from './common/LoadingSpinner';\nimport Papa from 'papaparse';\nimport './InventoryManagement.css';\nimport Prescriptions, { getMedicationUsage } from './Prescriptions';\n\n// Initial drugs data\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst initialDrugs = [{\n  id: 1,\n  name: 'Paracetamol 500mg',\n  category: 'Pain Relief',\n  stock: 450,\n  reorderLevel: 100,\n  supplier: 'PharmaCorp',\n  cost: 2.50,\n  expiry: '2025-12-31',\n  status: 'optimal',\n  usage: 15\n}, {\n  id: 2,\n  name: 'Amoxicillin 250mg',\n  category: 'Antibiotics',\n  stock: 80,\n  reorderLevel: 150,\n  supplier: 'MediHealth',\n  cost: 5.00,\n  expiry: '2024-08-15',\n  status: 'critical',\n  usage: 8\n}, {\n  id: 3,\n  name: 'Ibuprofen 400mg',\n  category: 'Pain Relief',\n  stock: 320,\n  reorderLevel: 150,\n  supplier: 'PharmaCorp',\n  cost: 3.25,\n  expiry: '2025-06-30',\n  status: 'optimal',\n  usage: 12\n}\n// ... rest of the drugs\n];\nexport function InventoryManagement({\n  onNavigate\n}) {\n  _s();\n  // State Management\n  const [showUserMenu, setShowUserMenu] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState('all');\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [showPrescriptions, setShowPrescriptions] = useState(false); // New state for prescriptions view\n  const [addForm, setAddForm] = useState({\n    name: '',\n    category: '',\n    stock: '',\n    reorderLevel: '',\n    supplier: '',\n    cost: '',\n    expiry: ''\n  });\n  const [addErrors, setAddErrors] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [page, setPage] = useState(1);\n  const [sortKey, setSortKey] = useState('name');\n  const [sortOrder, setSortOrder] = useState('asc');\n  const [inventory, setInventory] = useState(initialDrugs);\n  const [prescriptions, setPrescriptions] = useState([]);\n  const pageSize = 5;\n\n  // Load prescriptions data (in real app, this would be from API)\n  useEffect(() => {\n    // Mock prescriptions data - in real app, fetch from API\n    const mockPrescriptions = [{\n      id: 1,\n      patientId: \"P001\",\n      patientName: \"John Doe\",\n      medication: \"Paracetamol 500mg\",\n      dosage: \"200mg\",\n      frequency: \"Every 6 hours\",\n      duration: \"7 days\",\n      quantity: 30,\n      status: 'COMPLETED'\n    }, {\n      id: 2,\n      patientId: \"P002\",\n      patientName: \"Jane Smith\",\n      medication: \"Amoxicillin 250mg\",\n      dosage: \"500mg\",\n      frequency: \"Every 8 hours\",\n      duration: \"5 days\",\n      quantity: 20,\n      status: 'ACTIVE'\n    }];\n    setPrescriptions(mockPrescriptions);\n  }, []);\n\n  // Calculate medication usage from prescriptions\n  const medicationUsage = useMemo(() => {\n    return getMedicationUsage(prescriptions);\n  }, [prescriptions]);\n\n  // Update inventory usage based on prescriptions\n  useEffect(() => {\n    if (Object.keys(medicationUsage).length > 0) {\n      setInventory(prev => prev.map(drug => {\n        const usage = medicationUsage[drug.name];\n        if (usage) {\n          return {\n            ...drug,\n            usage: Math.max(drug.usage, usage.totalQuantity / 30) // Average daily usage\n          };\n        }\n        return drug;\n      }));\n    }\n  }, [medicationUsage]);\n\n  // Handle prescription fulfillment (when medication is dispensed)\n  const handlePrescriptionFulfilled = fulfillmentData => {\n    const {\n      medication,\n      quantity\n    } = fulfillmentData;\n\n    // Update inventory stock\n    setInventory(prev => prev.map(item => {\n      if (item.name === medication) {\n        const newStock = item.stock - quantity;\n        const newStatus = newStock <= item.reorderLevel * 1.5 ? 'critical' : newStock <= item.reorderLevel * 2 ? 'low' : 'optimal';\n        return {\n          ...item,\n          stock: newStock,\n          status: newStatus\n        };\n      }\n      return item;\n    }));\n\n    // Show notification\n    alert(`Inventory updated: ${quantity} units of ${medication} deducted from stock.`);\n  };\n\n  // Calculate statistics - updated to use inventory state\n  const stats = useMemo(() => ({\n    total: inventory.reduce((sum, d) => sum + d.stock, 0),\n    critical: inventory.filter(d => d.status === 'critical').length,\n    reorderNeeded: inventory.filter(d => d.stock <= d.reorderLevel).length,\n    totalValue: inventory.reduce((sum, d) => sum + d.stock * d.cost, 0),\n    expiringSoon: inventory.filter(d => {\n      const expiryDate = new Date(d.expiry);\n      const today = new Date();\n      const diffTime = expiryDate.getTime() - today.getTime();\n      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n      return diffDays <= 30 && diffDays > 0;\n    }).length\n  }), [inventory]);\n\n  // Filter and sort drugs\n  const filteredDrugs = useMemo(() => {\n    return inventory.filter(drug => {\n      const matchesSearch = drug.name.toLowerCase().includes(searchQuery.toLowerCase()) || drug.supplier.toLowerCase().includes(searchQuery.toLowerCase()) || drug.category.toLowerCase().includes(searchQuery.toLowerCase());\n      const matchesCategory = selectedCategory === 'all' || drug.category === selectedCategory;\n      return matchesSearch && matchesCategory;\n    });\n  }, [inventory, searchQuery, selectedCategory]);\n  const sortedDrugs = useMemo(() => {\n    return [...filteredDrugs].sort((a, b) => {\n      let aVal = a[sortKey];\n      let bVal = b[sortKey];\n      if (typeof aVal === 'string' && typeof bVal === 'string') {\n        return sortOrder === 'asc' ? aVal.localeCompare(bVal) : bVal.localeCompare(aVal);\n      }\n      return sortOrder === 'asc' ? aVal - bVal : bVal - aVal;\n    });\n  }, [filteredDrugs, sortKey, sortOrder]);\n  const pagedDrugs = useMemo(() => {\n    return sortedDrugs.slice((page - 1) * pageSize, page * pageSize);\n  }, [sortedDrugs, page, pageSize]);\n  const totalPages = Math.ceil(filteredDrugs.length / pageSize);\n\n  // Add to TopBar navigation - Add Prescriptions button\n  const TopBar = () => /*#__PURE__*/_jsxDEV(\"header\", {\n    className: \"inventory-topbar\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"topbar-content\",\n      children: /*#__PURE__*/_jsxDEV(\"nav\", {\n        className: \"desktop-nav\",\n        children: [onNavigate && /*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"module-select\",\n          onChange: e => onNavigate(e.target.value),\n          defaultValue: \"\",\n          \"aria-label\": \"Navigate to module\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            disabled: true,\n            children: \"Go to module...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"nurse\",\n            children: \"Nurse Triage\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"queue\",\n            children: \"Queue Management\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"doctor\",\n            children: \"Doctor Portal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"resources\",\n            children: \"Resource Dashboard\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"analytics\",\n            children: \"Analytics\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"nav-btn\",\n          onClick: () => window.location.href = '/pharmacy/home',\n          \"aria-label\": \"Go to home\",\n          children: [/*#__PURE__*/_jsxDEV(Home, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Home\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"nav-btn\",\n          onClick: () => setShowPrescriptions(true),\n          \"aria-label\": \"View prescriptions\",\n          children: [/*#__PURE__*/_jsxDEV(FileText, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Prescriptions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"nav-btn\",\n          onClick: () => window.location.href = '/pharmacy/analytics',\n          \"aria-label\": \"View analytics\",\n          children: [/*#__PURE__*/_jsxDEV(BarChart3, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Analytics\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(NotificationButton, {\n          onClick: () => alert('Notifications will appear here. (Backend integration pending)'),\n          \"aria-label\": \"View notifications\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 167,\n    columnNumber: 5\n  }, this);\n\n  // Add back button for prescriptions view\n  const PrescriptionsView = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"prescriptions-view\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"prescriptions-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"back-button\",\n        onClick: () => setShowPrescriptions(false),\n        children: \"\\u2190 Back to Inventory\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Prescription Management\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Prescriptions, {\n      userRole: \"pharmacist\",\n      inventory: inventory,\n      onPrescriptionFulfilled: handlePrescriptionFulfilled\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 231,\n    columnNumber: 5\n  }, this);\n\n  // Main render - conditionally show prescriptions or inventory\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"inventory-management\",\n    children: [/*#__PURE__*/_jsxDEV(TopBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"inventory-content\",\n      children: showPrescriptions ? /*#__PURE__*/_jsxDEV(PrescriptionsView, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"page-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"header-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              children: \"Pharmacy Inventory\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Real-time medication stock management and alerts\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"header-actions\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"action-btn primary\",\n              onClick: () => setShowPrescriptions(true),\n              children: [/*#__PURE__*/_jsxDEV(FileText, {\n                size: 18\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"View Prescriptions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 272,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stats-grid\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"stat-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-icon info\",\n              children: /*#__PURE__*/_jsxDEV(FileText, {\n                size: 24\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 284,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"stat-content\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: prescriptions.length\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Active Prescriptions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"stat-trend\",\n                children: \"Affecting inventory\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"inventory-table-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"table-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Medication Inventory\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"table-info\",\n              children: [\"Showing \", pagedDrugs.length, \" of \", filteredDrugs.length, \" items\", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"prescription-impact\",\n                children: [\"\\u2022 \", Object.keys(medicationUsage).length, \" medications have prescription history\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"table-wrapper\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"inventory-table\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Medication\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 312,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Category\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 313,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Current Stock\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 314,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Prescription Demand\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 315,\n                    columnNumber: 23\n                  }, this), \" \", /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Reorder Level\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 316,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Supplier\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 317,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Status\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 318,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Actions\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 319,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 311,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 310,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: pagedDrugs.map(drug => {\n                  const usage = medicationUsage[drug.name];\n                  const prescriptionCount = usage ? usage.prescriptionCount : 0;\n                  return /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"medication-info\",\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"medication-icon\",\n                          children: /*#__PURE__*/_jsxDEV(Pill, {\n                            size: 20\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 332,\n                            columnNumber: 33\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 331,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"medication-name\",\n                            children: drug.name\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 335,\n                            columnNumber: 33\n                          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"medication-id\",\n                            children: [\"ID: MED-\", String(drug.id).padStart(4, '0')]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 336,\n                            columnNumber: 33\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 334,\n                          columnNumber: 31\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 330,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 329,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"category-tag\",\n                        children: drug.category\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 341,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 340,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: `stock-badge ${drug.stock <= drug.reorderLevel ? 'warning' : ''}`,\n                        children: drug.stock.toLocaleString()\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 344,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 343,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"prescription-demand\",\n                        children: prescriptionCount > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                          children: [/*#__PURE__*/_jsxDEV(FileText, {\n                            size: 14\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 352,\n                            columnNumber: 35\n                          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                            children: [prescriptionCount, \" prescriptions\"]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 353,\n                            columnNumber: 35\n                          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                            className: \"demand-quantity\",\n                            children: [(usage === null || usage === void 0 ? void 0 : usage.totalQuantity) || 0, \" units total\"]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 354,\n                            columnNumber: 35\n                          }, this)]\n                        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"span\", {\n                          className: \"no-demand\",\n                          children: \"No prescription history\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 359,\n                          columnNumber: 33\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 349,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 348,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: drug.reorderLevel.toLocaleString()\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 363,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: drug.supplier\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 364,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: `status-badge ${drug.status === 'critical' ? 'bg-red-100 text-red-800' : drug.status === 'low' ? 'bg-yellow-100 text-yellow-800' : 'bg-green-100 text-green-800'}`,\n                        children: [drug.status === 'critical' ? /*#__PURE__*/_jsxDEV(AlertTriangle, {\n                          size: 16\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 369,\n                          columnNumber: 61\n                        }, this) : drug.status === 'low' ? /*#__PURE__*/_jsxDEV(AlertCircle, {\n                          size: 16\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 370,\n                          columnNumber: 56\n                        }, this) : /*#__PURE__*/_jsxDEV(CheckCircle, {\n                          size: 16\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 371,\n                          columnNumber: 32\n                        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                          children: drug.status.charAt(0).toUpperCase() + drug.status.slice(1)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 372,\n                          columnNumber: 31\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 366,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 365,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"action-buttons-cell\",\n                        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                          className: \"action-menu-btn\",\n                          onClick: () => {\n                            // View prescriptions for this medication\n                            setShowPrescriptions(true);\n                            // In real app, you might filter prescriptions by medication\n                          },\n                          title: \"View prescriptions\",\n                          children: /*#__PURE__*/_jsxDEV(FileText, {\n                            size: 16\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 386,\n                            columnNumber: 33\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 377,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          className: \"action-menu-btn\",\n                          title: \"More options\",\n                          children: /*#__PURE__*/_jsxDEV(MoreVertical, {\n                            size: 18\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 389,\n                            columnNumber: 33\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 388,\n                          columnNumber: 31\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 376,\n                        columnNumber: 29\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 375,\n                      columnNumber: 27\n                    }, this)]\n                  }, drug.id, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 328,\n                    columnNumber: 25\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 252,\n    columnNumber: 5\n  }, this);\n}\n_s(InventoryManagement, \"6ETARW3VGeDesJskRzLQRUXs6Xc=\");\n_c = InventoryManagement;\nvar _c;\n$RefreshReg$(_c, \"InventoryManagement\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","NotificationButton","User","ChevronDown","LogOut","Home","BarChart3","Package","Plus","AlertTriangle","CheckCircle","Clock","TrendingUp","Search","Filter","Download","Pill","MoreVertical","AlertCircle","ShoppingCart","Menu","X","Calendar","DollarSign","Box","Thermometer","FileText","LoadingSpinner","Papa","Prescriptions","getMedicationUsage","jsxDEV","_jsxDEV","Fragment","_Fragment","initialDrugs","id","name","category","stock","reorderLevel","supplier","cost","expiry","status","usage","InventoryManagement","onNavigate","_s","showUserMenu","setShowUserMenu","searchQuery","setSearchQuery","selectedCategory","setSelectedCategory","mobileMenuOpen","setMobileMenuOpen","showAddModal","setShowAddModal","showPrescriptions","setShowPrescriptions","addForm","setAddForm","addErrors","setAddErrors","loading","setLoading","page","setPage","sortKey","setSortKey","sortOrder","setSortOrder","inventory","setInventory","prescriptions","setPrescriptions","pageSize","mockPrescriptions","patientId","patientName","medication","dosage","frequency","duration","quantity","medicationUsage","Object","keys","length","prev","map","drug","Math","max","totalQuantity","handlePrescriptionFulfilled","fulfillmentData","item","newStock","newStatus","alert","stats","total","reduce","sum","d","critical","filter","reorderNeeded","totalValue","expiringSoon","expiryDate","Date","today","diffTime","getTime","diffDays","ceil","filteredDrugs","matchesSearch","toLowerCase","includes","matchesCategory","sortedDrugs","sort","a","b","aVal","bVal","localeCompare","pagedDrugs","slice","totalPages","TopBar","className","children","onChange","e","target","value","defaultValue","disabled","fileName","_jsxFileName","lineNumber","columnNumber","onClick","window","location","href","size","PrescriptionsView","userRole","onPrescriptionFulfilled","prescriptionCount","String","padStart","toLocaleString","charAt","toUpperCase","title","_c","$RefreshReg$"],"sources":["C:/Users/PC/Desktop/Momentum stra-health project/src/components/InventoryManagement.js"],"sourcesContent":["// InventoryManagement.js (Updated)\r\nimport React, { useState, useEffect, useMemo } from 'react';\r\nimport NotificationButton from './common/NotificationButton';\r\nimport { \r\n  User, ChevronDown, LogOut, Home, BarChart3, Package, Plus, \r\n  AlertTriangle, CheckCircle, Clock, TrendingUp, Search, Filter, \r\n  Download, Pill, MoreVertical, AlertCircle, ShoppingCart, Menu, X,\r\n  Calendar, DollarSign, Box, Thermometer, FileText\r\n} from 'lucide-react';\r\nimport LoadingSpinner from './common/LoadingSpinner';\r\nimport Papa from 'papaparse';\r\nimport './InventoryManagement.css';\r\nimport Prescriptions, { getMedicationUsage } from './Prescriptions';\r\n\r\n// Initial drugs data\r\nconst initialDrugs = [\r\n  { id: 1, name: 'Paracetamol 500mg', category: 'Pain Relief', stock: 450, reorderLevel: 100, supplier: 'PharmaCorp', cost: 2.50, expiry: '2025-12-31', status: 'optimal', usage: 15 },\r\n  { id: 2, name: 'Amoxicillin 250mg', category: 'Antibiotics', stock: 80, reorderLevel: 150, supplier: 'MediHealth', cost: 5.00, expiry: '2024-08-15', status: 'critical', usage: 8 },\r\n  { id: 3, name: 'Ibuprofen 400mg', category: 'Pain Relief', stock: 320, reorderLevel: 150, supplier: 'PharmaCorp', cost: 3.25, expiry: '2025-06-30', status: 'optimal', usage: 12 },\r\n  // ... rest of the drugs\r\n];\r\n\r\nexport function InventoryManagement({ onNavigate }) {\r\n  // State Management\r\n  const [showUserMenu, setShowUserMenu] = useState(false);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [selectedCategory, setSelectedCategory] = useState('all');\r\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\r\n  const [showAddModal, setShowAddModal] = useState(false);\r\n  const [showPrescriptions, setShowPrescriptions] = useState(false); // New state for prescriptions view\r\n  const [addForm, setAddForm] = useState({\r\n    name: '', category: '', stock: '', reorderLevel: '', supplier: '', cost: '', expiry: ''\r\n  });\r\n  const [addErrors, setAddErrors] = useState({});\r\n  const [loading, setLoading] = useState(false);\r\n  const [page, setPage] = useState(1);\r\n  const [sortKey, setSortKey] = useState('name');\r\n  const [sortOrder, setSortOrder] = useState('asc');\r\n  const [inventory, setInventory] = useState(initialDrugs);\r\n  const [prescriptions, setPrescriptions] = useState([]);\r\n  const pageSize = 5;\r\n\r\n  // Load prescriptions data (in real app, this would be from API)\r\n  useEffect(() => {\r\n    // Mock prescriptions data - in real app, fetch from API\r\n    const mockPrescriptions = [\r\n      {\r\n        id: 1,\r\n        patientId: \"P001\",\r\n        patientName: \"John Doe\",\r\n        medication: \"Paracetamol 500mg\",\r\n        dosage: \"200mg\",\r\n        frequency: \"Every 6 hours\",\r\n        duration: \"7 days\",\r\n        quantity: 30,\r\n        status: 'COMPLETED'\r\n      },\r\n      {\r\n        id: 2,\r\n        patientId: \"P002\",\r\n        patientName: \"Jane Smith\",\r\n        medication: \"Amoxicillin 250mg\",\r\n        dosage: \"500mg\",\r\n        frequency: \"Every 8 hours\",\r\n        duration: \"5 days\",\r\n        quantity: 20,\r\n        status: 'ACTIVE'\r\n      }\r\n    ];\r\n    setPrescriptions(mockPrescriptions);\r\n  }, []);\r\n\r\n  // Calculate medication usage from prescriptions\r\n  const medicationUsage = useMemo(() => {\r\n    return getMedicationUsage(prescriptions);\r\n  }, [prescriptions]);\r\n\r\n  // Update inventory usage based on prescriptions\r\n  useEffect(() => {\r\n    if (Object.keys(medicationUsage).length > 0) {\r\n      setInventory(prev => prev.map(drug => {\r\n        const usage = medicationUsage[drug.name];\r\n        if (usage) {\r\n          return {\r\n            ...drug,\r\n            usage: Math.max(drug.usage, usage.totalQuantity / 30) // Average daily usage\r\n          };\r\n        }\r\n        return drug;\r\n      }));\r\n    }\r\n  }, [medicationUsage]);\r\n\r\n  // Handle prescription fulfillment (when medication is dispensed)\r\n  const handlePrescriptionFulfilled = (fulfillmentData) => {\r\n    const { medication, quantity } = fulfillmentData;\r\n    \r\n    // Update inventory stock\r\n    setInventory(prev => prev.map(item => {\r\n      if (item.name === medication) {\r\n        const newStock = item.stock - quantity;\r\n        const newStatus = newStock <= item.reorderLevel * 1.5 ? 'critical' : \r\n                         newStock <= item.reorderLevel * 2 ? 'low' : 'optimal';\r\n        \r\n        return {\r\n          ...item,\r\n          stock: newStock,\r\n          status: newStatus\r\n        };\r\n      }\r\n      return item;\r\n    }));\r\n\r\n    // Show notification\r\n    alert(`Inventory updated: ${quantity} units of ${medication} deducted from stock.`);\r\n  };\r\n\r\n  // Calculate statistics - updated to use inventory state\r\n  const stats = useMemo(() => ({\r\n    total: inventory.reduce((sum, d) => sum + d.stock, 0),\r\n    critical: inventory.filter(d => d.status === 'critical').length,\r\n    reorderNeeded: inventory.filter(d => d.stock <= d.reorderLevel).length,\r\n    totalValue: inventory.reduce((sum, d) => sum + (d.stock * d.cost), 0),\r\n    expiringSoon: inventory.filter(d => {\r\n      const expiryDate = new Date(d.expiry);\r\n      const today = new Date();\r\n      const diffTime = expiryDate.getTime() - today.getTime();\r\n      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n      return diffDays <= 30 && diffDays > 0;\r\n    }).length\r\n  }), [inventory]);\r\n\r\n  // Filter and sort drugs\r\n  const filteredDrugs = useMemo(() => {\r\n    return inventory.filter(drug => {\r\n      const matchesSearch = drug.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n                          drug.supplier.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n                          drug.category.toLowerCase().includes(searchQuery.toLowerCase());\r\n      const matchesCategory = selectedCategory === 'all' || drug.category === selectedCategory;\r\n      return matchesSearch && matchesCategory;\r\n    });\r\n  }, [inventory, searchQuery, selectedCategory]);\r\n\r\n  const sortedDrugs = useMemo(() => {\r\n    return [...filteredDrugs].sort((a, b) => {\r\n      let aVal = a[sortKey];\r\n      let bVal = b[sortKey];\r\n      \r\n      if (typeof aVal === 'string' && typeof bVal === 'string') {\r\n        return sortOrder === 'asc' \r\n          ? aVal.localeCompare(bVal)\r\n          : bVal.localeCompare(aVal);\r\n      }\r\n      \r\n      return sortOrder === 'asc' ? aVal - bVal : bVal - aVal;\r\n    });\r\n  }, [filteredDrugs, sortKey, sortOrder]);\r\n\r\n  const pagedDrugs = useMemo(() => {\r\n    return sortedDrugs.slice((page - 1) * pageSize, page * pageSize);\r\n  }, [sortedDrugs, page, pageSize]);\r\n\r\n  const totalPages = Math.ceil(filteredDrugs.length / pageSize);\r\n\r\n  // Add to TopBar navigation - Add Prescriptions button\r\n  const TopBar = () => (\r\n    <header className=\"inventory-topbar\">\r\n      <div className=\"topbar-content\">\r\n        {/* ... existing mobile menu button ... */}\r\n\r\n        {/* ... existing brand section ... */}\r\n\r\n        {/* Desktop Navigation - Updated with Prescriptions button */}\r\n        <nav className=\"desktop-nav\">\r\n          {onNavigate && (\r\n            <select\r\n              className=\"module-select\"\r\n              onChange={e => onNavigate(e.target.value)}\r\n              defaultValue=\"\"\r\n              aria-label=\"Navigate to module\"\r\n            >\r\n              <option value=\"\" disabled>Go to module...</option>\r\n              <option value=\"nurse\">Nurse Triage</option>\r\n              <option value=\"queue\">Queue Management</option>\r\n              <option value=\"doctor\">Doctor Portal</option>\r\n              <option value=\"resources\">Resource Dashboard</option>\r\n              <option value=\"analytics\">Analytics</option>\r\n            </select>\r\n          )}\r\n          \r\n          <button \r\n            className=\"nav-btn\"\r\n            onClick={() => window.location.href = '/pharmacy/home'}\r\n            aria-label=\"Go to home\"\r\n          >\r\n            <Home size={20} />\r\n            <span>Home</span>\r\n          </button>\r\n          \r\n          <button \r\n            className=\"nav-btn\"\r\n            onClick={() => setShowPrescriptions(true)}\r\n            aria-label=\"View prescriptions\"\r\n          >\r\n            <FileText size={20} />\r\n            <span>Prescriptions</span>\r\n          </button>\r\n          \r\n          <button \r\n            className=\"nav-btn\"\r\n            onClick={() => window.location.href = '/pharmacy/analytics'}\r\n            aria-label=\"View analytics\"\r\n          >\r\n            <BarChart3 size={20} />\r\n            <span>Analytics</span>\r\n          </button>\r\n\r\n          <NotificationButton \r\n            onClick={() => alert('Notifications will appear here. (Backend integration pending)')}\r\n            aria-label=\"View notifications\"\r\n          />\r\n        </nav>\r\n\r\n        {/* ... existing user menu ... */}\r\n      </div>\r\n    </header>\r\n  );\r\n\r\n  // Add back button for prescriptions view\r\n  const PrescriptionsView = () => (\r\n    <div className=\"prescriptions-view\">\r\n      <div className=\"prescriptions-header\">\r\n        <button\r\n          className=\"back-button\"\r\n          onClick={() => setShowPrescriptions(false)}\r\n        >\r\n          ← Back to Inventory\r\n        </button>\r\n        <h2>Prescription Management</h2>\r\n      </div>\r\n      \r\n      <Prescriptions \r\n        userRole=\"pharmacist\" \r\n        inventory={inventory}\r\n        onPrescriptionFulfilled={handlePrescriptionFulfilled}\r\n      />\r\n    </div>\r\n  );\r\n\r\n  // Main render - conditionally show prescriptions or inventory\r\n  return (\r\n    <div className=\"inventory-management\">\r\n      <TopBar />\r\n      \r\n      <main className=\"inventory-content\">\r\n        {showPrescriptions ? (\r\n          <PrescriptionsView />\r\n        ) : (\r\n          <>\r\n            {/* Page Header with quick stats */}\r\n            <div className=\"page-header\">\r\n              <div className=\"header-content\">\r\n                <h1>Pharmacy Inventory</h1>\r\n                <p>Real-time medication stock management and alerts</p>\r\n              </div>\r\n              <div className=\"header-actions\">\r\n                <button \r\n                  className=\"action-btn primary\"\r\n                  onClick={() => setShowPrescriptions(true)}\r\n                >\r\n                  <FileText size={18} />\r\n                  <span>View Prescriptions</span>\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Stats Cards - Add prescription impact info */}\r\n            <div className=\"stats-grid\">\r\n              {/* ... existing stat cards ... */}\r\n              \r\n              {/* Add a new stat card for prescription impact */}\r\n              <div className=\"stat-card\">\r\n                <div className=\"stat-icon info\">\r\n                  <FileText size={24} />\r\n                </div>\r\n                <div className=\"stat-content\">\r\n                  <h3>{prescriptions.length}</h3>\r\n                  <p>Active Prescriptions</p>\r\n                  <span className=\"stat-trend\">Affecting inventory</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* ... rest of the inventory management UI ... */}\r\n            \r\n            {/* Enhanced drug table with prescription info */}\r\n            <div className=\"inventory-table-container\">\r\n              <div className=\"table-header\">\r\n                <h3>Medication Inventory</h3>\r\n                <div className=\"table-info\">\r\n                  Showing {pagedDrugs.length} of {filteredDrugs.length} items\r\n                  <span className=\"prescription-impact\">\r\n                    • {Object.keys(medicationUsage).length} medications have prescription history\r\n                  </span>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"table-wrapper\">\r\n                <table className=\"inventory-table\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th>Medication</th>\r\n                      <th>Category</th>\r\n                      <th>Current Stock</th>\r\n                      <th>Prescription Demand</th> {/* New column */}\r\n                      <th>Reorder Level</th>\r\n                      <th>Supplier</th>\r\n                      <th>Status</th>\r\n                      <th>Actions</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {pagedDrugs.map((drug) => {\r\n                      const usage = medicationUsage[drug.name];\r\n                      const prescriptionCount = usage ? usage.prescriptionCount : 0;\r\n                      \r\n                      return (\r\n                        <tr key={drug.id}>\r\n                          <td>\r\n                            <div className=\"medication-info\">\r\n                              <div className=\"medication-icon\">\r\n                                <Pill size={20} />\r\n                              </div>\r\n                              <div>\r\n                                <div className=\"medication-name\">{drug.name}</div>\r\n                                <div className=\"medication-id\">ID: MED-{String(drug.id).padStart(4, '0')}</div>\r\n                              </div>\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <span className=\"category-tag\">{drug.category}</span>\r\n                          </td>\r\n                          <td>\r\n                            <div className={`stock-badge ${drug.stock <= drug.reorderLevel ? 'warning' : ''}`}>\r\n                              {drug.stock.toLocaleString()}\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"prescription-demand\">\r\n                              {prescriptionCount > 0 ? (\r\n                                <>\r\n                                  <FileText size={14} />\r\n                                  <span>{prescriptionCount} prescriptions</span>\r\n                                  <span className=\"demand-quantity\">\r\n                                    {usage?.totalQuantity || 0} units total\r\n                                  </span>\r\n                                </>\r\n                              ) : (\r\n                                <span className=\"no-demand\">No prescription history</span>\r\n                              )}\r\n                            </div>\r\n                          </td>\r\n                          <td>{drug.reorderLevel.toLocaleString()}</td>\r\n                          <td>{drug.supplier}</td>\r\n                          <td>\r\n                            <div className={`status-badge ${drug.status === 'critical' ? 'bg-red-100 text-red-800' : \r\n                              drug.status === 'low' ? 'bg-yellow-100 text-yellow-800' : \r\n                              'bg-green-100 text-green-800'}`}>\r\n                              {drug.status === 'critical' ? <AlertTriangle size={16} /> :\r\n                               drug.status === 'low' ? <AlertCircle size={16} /> :\r\n                               <CheckCircle size={16} />}\r\n                              <span>{drug.status.charAt(0).toUpperCase() + drug.status.slice(1)}</span>\r\n                            </div>\r\n                          </td>\r\n                          <td>\r\n                            <div className=\"action-buttons-cell\">\r\n                              <button \r\n                                className=\"action-menu-btn\"\r\n                                onClick={() => {\r\n                                  // View prescriptions for this medication\r\n                                  setShowPrescriptions(true);\r\n                                  // In real app, you might filter prescriptions by medication\r\n                                }}\r\n                                title=\"View prescriptions\"\r\n                              >\r\n                                <FileText size={16} />\r\n                              </button>\r\n                              <button className=\"action-menu-btn\" title=\"More options\">\r\n                                <MoreVertical size={18} />\r\n                              </button>\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                      );\r\n                    })}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n      </main>\r\n\r\n      {/* ... existing modals ... */}\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}